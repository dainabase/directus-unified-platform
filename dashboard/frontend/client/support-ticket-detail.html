<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover"/>
    <meta http-equiv="X-UA-Compatible" content="ie=edge"/>
    <title>Ticket #2024-1234 - Support - Client Portal</title>
    
    <!-- CSS files -->
    <link href="https://cdn.jsdelivr.net/npm/@tabler/core@1.0.0-beta20/dist/css/tabler.min.css" rel="stylesheet"/>
    <link href="../assets/css/custom.css" rel="stylesheet"/>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@tabler/icons@latest/iconfont/tabler-icons.min.css">
</head>
<body class="layout-fluid role-client">
    <div class="page">
        <!-- Navbar -->
        <header class="navbar navbar-expand-md d-print-none">
            <div class="container-xl">
                <!-- Navbar content loaded dynamically -->
            </div>
        </header>

        <!-- Sidebar -->
        <aside class="navbar navbar-vertical navbar-expand-md" id="sidebar-menu">
            <!-- Sidebar content loaded dynamically -->
        </aside>

        <div class="page-wrapper">
            <div class="page-header d-print-none">
                <div class="container-xl">
                    <div class="row g-2 align-items-center">
                        <div class="col">
                            <div class="page-pretitle">Support</div>
                            <h2 class="page-title">
                                Ticket #2024-1234
                            </h2>
                        </div>
                        <div class="col-auto ms-auto d-print-none">
                            <div class="btn-list">
                                <a href="support.html" class="btn">
                                    <i class="ti ti-arrow-left"></i>
                                    Retour aux tickets
                                </a>
                                <button class="btn btn-danger" data-bs-toggle="modal" data-bs-target="#modal-close-ticket">
                                    <i class="ti ti-x"></i>
                                    Fermer le ticket
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="page-body">
                <div class="container-xl">
                    <div class="row row-cards">
                        <!-- Informations du ticket -->
                        <div class="col-lg-4">
                            <div class="card">
                                <div class="card-header">
                                    <h3 class="card-title">Informations du ticket</h3>
                                </div>
                                <div class="card-body">
                                    <div class="datagrid">
                                        <div class="datagrid-item">
                                            <div class="datagrid-title">Statut</div>
                                            <div class="datagrid-content">
                                                <span class="badge bg-warning">En cours</span>
                                            </div>
                                        </div>
                                        <div class="datagrid-item">
                                            <div class="datagrid-title">Priorité</div>
                                            <div class="datagrid-content">
                                                <span class="badge bg-danger">Haute</span>
                                            </div>
                                        </div>
                                        <div class="datagrid-item">
                                            <div class="datagrid-title">Catégorie</div>
                                            <div class="datagrid-content">Technique</div>
                                        </div>
                                        <div class="datagrid-item">
                                            <div class="datagrid-title">Projet associé</div>
                                            <div class="datagrid-content">
                                                <a href="project-detail.html">Site e-commerce</a>
                                            </div>
                                        </div>
                                        <div class="datagrid-item">
                                            <div class="datagrid-title">Créé le</div>
                                            <div class="datagrid-content">15 juillet 2025, 10:30</div>
                                        </div>
                                        <div class="datagrid-item">
                                            <div class="datagrid-title">Dernière mise à jour</div>
                                            <div class="datagrid-content">25 juillet 2025, 14:45</div>
                                        </div>
                                        <div class="datagrid-item">
                                            <div class="datagrid-title">Assigné à</div>
                                            <div class="datagrid-content">
                                                <div class="d-flex align-items-center">
                                                    <span class="avatar avatar-sm bg-blue-lt">TC</span>
                                                    <div class="ms-2">
                                                        <div>Thomas Chevrier</div>
                                                        <div class="text-muted small">Support technique</div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="card-footer">
                                    <div class="d-flex">
                                        <a href="#" class="btn btn-link" data-bs-toggle="modal" data-bs-target="#modal-edit-ticket">
                                            <i class="ti ti-pencil"></i>
                                            Modifier
                                        </a>
                                        <a href="#" class="btn btn-link ms-auto">
                                            <i class="ti ti-download"></i>
                                            Exporter
                                        </a>
                                    </div>
                                </div>
                            </div>

                            <!-- Pièces jointes -->
                            <div class="card mt-3">
                                <div class="card-header">
                                    <h3 class="card-title">Pièces jointes</h3>
                                </div>
                                <div class="list-group list-group-flush">
                                    <div class="list-group-item">
                                        <div class="row align-items-center">
                                            <div class="col-auto">
                                                <span class="avatar bg-blue-lt">
                                                    <i class="ti ti-file-text"></i>
                                                </span>
                                            </div>
                                            <div class="col text-truncate">
                                                <div class="text-reset d-block">capture-erreur.png</div>
                                                <div class="text-muted text-truncate">245 KB</div>
                                            </div>
                                            <div class="col-auto">
                                                <a href="#" class="list-group-item-actions">
                                                    <i class="ti ti-download"></i>
                                                </a>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="list-group-item">
                                        <div class="row align-items-center">
                                            <div class="col-auto">
                                                <span class="avatar bg-blue-lt">
                                                    <i class="ti ti-file-code"></i>
                                                </span>
                                            </div>
                                            <div class="col text-truncate">
                                                <div class="text-reset d-block">logs-console.txt</div>
                                                <div class="text-muted text-truncate">12 KB</div>
                                            </div>
                                            <div class="col-auto">
                                                <a href="#" class="list-group-item-actions">
                                                    <i class="ti ti-download"></i>
                                                </a>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="card-footer">
                                    <button class="btn btn-primary w-100" data-bs-toggle="modal" data-bs-target="#modal-upload">
                                        <i class="ti ti-upload"></i>
                                        Ajouter une pièce jointe
                                    </button>
                                </div>
                            </div>
                        </div>

                        <!-- Conversation -->
                        <div class="col-lg-8">
                            <div class="card">
                                <div class="card-header">
                                    <h3 class="card-title">Problème avec le formulaire de contact</h3>
                                </div>
                                <div class="card-body">
                                    <!-- Timeline de conversation -->
                                    <div class="timeline" data-timeline="true">
                                        <!-- Message initial -->
                                        <div class="timeline-item">
                                            <div class="timeline-item-point bg-primary">
                                                <i class="ti ti-message"></i>
                                            </div>
                                            <div class="timeline-item-title">Jean Dupont</div>
                                            <div class="timeline-item-time">15 juillet 2025, 10:30</div>
                                            <div class="timeline-item-description">
                                                <p>Bonjour,</p>
                                                <p>Je rencontre un problème avec le formulaire de contact sur notre site. Lorsque les utilisateurs tentent d'envoyer un message, ils reçoivent une erreur 500.</p>
                                                <p>J'ai joint une capture d'écran de l'erreur ainsi que les logs de la console.</p>
                                                <p>Pouvez-vous regarder ce problème rapidement ? C'est assez urgent car nous avons une campagne marketing en cours.</p>
                                                <p>Merci d'avance.</p>
                                            </div>
                                        </div>

                                        <!-- Réponse support -->
                                        <div class="timeline-item">
                                            <div class="timeline-item-point bg-success">
                                                <i class="ti ti-headset"></i>
                                            </div>
                                            <div class="timeline-item-title">Thomas Chevrier <span class="badge bg-azure-lt ms-2">Support</span></div>
                                            <div class="timeline-item-time">15 juillet 2025, 11:15</div>
                                            <div class="timeline-item-description">
                                                <p>Bonjour Jean,</p>
                                                <p>Merci pour votre signalement. J'ai bien reçu les fichiers joints et je vais analyser le problème immédiatement.</p>
                                                <p>D'après les logs, il semble y avoir un problème avec la configuration SMTP. Je vais vérifier les paramètres du serveur mail.</p>
                                                <p>Je reviens vers vous dans l'heure avec plus d'informations.</p>
                                            </div>
                                        </div>

                                        <!-- Note interne -->
                                        <div class="timeline-item">
                                            <div class="timeline-item-point bg-yellow">
                                                <i class="ti ti-note"></i>
                                            </div>
                                            <div class="timeline-item-title">Note interne</div>
                                            <div class="timeline-item-time">15 juillet 2025, 11:45</div>
                                            <div class="timeline-item-description">
                                                <div class="alert alert-warning">
                                                    <strong>Note technique :</strong> Le serveur SMTP a été mis à jour récemment. Les anciennes credentials ne fonctionnent plus. Mise à jour du fichier .env nécessaire.
                                                </div>
                                            </div>
                                        </div>

                                        <!-- Mise à jour -->
                                        <div class="timeline-item">
                                            <div class="timeline-item-point bg-success">
                                                <i class="ti ti-headset"></i>
                                            </div>
                                            <div class="timeline-item-title">Thomas Chevrier <span class="badge bg-azure-lt ms-2">Support</span></div>
                                            <div class="timeline-item-time">15 juillet 2025, 12:30</div>
                                            <div class="timeline-item-description">
                                                <p>Jean,</p>
                                                <p>J'ai identifié le problème. Notre serveur SMTP a été migré et les paramètres de connexion ont changé. J'ai mis à jour la configuration et le formulaire devrait maintenant fonctionner correctement.</p>
                                                <p>Pouvez-vous tester de votre côté et me confirmer que tout fonctionne ?</p>
                                            </div>
                                        </div>

                                        <!-- Confirmation client -->
                                        <div class="timeline-item">
                                            <div class="timeline-item-point bg-primary">
                                                <i class="ti ti-message"></i>
                                            </div>
                                            <div class="timeline-item-title">Jean Dupont</div>
                                            <div class="timeline-item-time">15 juillet 2025, 14:00</div>
                                            <div class="timeline-item-description">
                                                <p>Parfait ! Je viens de tester et le formulaire fonctionne à nouveau.</p>
                                                <p>Merci pour votre réactivité. Vous pouvez fermer le ticket.</p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="card-footer">
                                    <!-- Formulaire de réponse -->
                                    <form>
                                        <div class="mb-3">
                                            <label class="form-label">Votre message</label>
                                            <textarea class="form-control" rows="3" placeholder="Écrivez votre réponse ici..."></textarea>
                                        </div>
                                        <div class="d-flex">
                                            <button type="button" class="btn btn-link" data-bs-toggle="modal" data-bs-target="#modal-upload">
                                                <i class="ti ti-paperclip"></i>
                                                Joindre un fichier
                                            </button>
                                            <button type="submit" class="btn btn-primary ms-auto">
                                                <i class="ti ti-send"></i>
                                                Envoyer la réponse
                                            </button>
                                        </div>
                                    </form>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Footer -->
            <footer class="footer footer-transparent d-print-none">
                <div class="container-xl">
                    <div class="row text-center align-items-center">
                        <div class="col-12 col-lg-auto mt-3 mt-lg-0">
                            <ul class="list-inline list-inline-dots mb-0">
                                <li class="list-inline-item">
                                    &copy; 2025 Portal Multi-Rôles
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
            </footer>
        </div>
    </div>

    <!-- Modal fermer ticket -->
    <div class="modal modal-blur fade" id="modal-close-ticket" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Fermer le ticket</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Fermer"></button>
                </div>
                <div class="modal-body">
                    <p>Êtes-vous sûr de vouloir fermer ce ticket ?</p>
                    <div class="mb-3">
                        <label class="form-label">Résolution</label>
                        <select class="form-select">
                            <option value="resolved">Résolu</option>
                            <option value="duplicate">Doublon</option>
                            <option value="invalid">Invalide</option>
                            <option value="wontfix">Ne sera pas corrigé</option>
                        </select>
                    </div>
                    <div class="mb-3">
                        <label class="form-label">Commentaire de fermeture (optionnel)</label>
                        <textarea class="form-control" rows="2"></textarea>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Annuler</button>
                    <button type="button" class="btn btn-danger">Fermer le ticket</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal éditer ticket -->
    <div class="modal modal-blur fade" id="modal-edit-ticket" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Modifier le ticket</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Fermer"></button>
                </div>
                <form>
                    <div class="modal-body">
                        <div class="mb-3">
                            <label class="form-label">Priorité</label>
                            <select class="form-select">
                                <option value="low">Basse</option>
                                <option value="medium">Moyenne</option>
                                <option value="high" selected>Haute</option>
                                <option value="urgent">Urgente</option>
                            </select>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Catégorie</label>
                            <select class="form-select">
                                <option value="technical" selected>Technique</option>
                                <option value="billing">Facturation</option>
                                <option value="general">Général</option>
                                <option value="feature">Nouvelle fonctionnalité</option>
                            </select>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Projet associé</label>
                            <select class="form-select">
                                <option value="1" selected>Site e-commerce</option>
                                <option value="2">Application mobile</option>
                                <option value="3">CRM interne</option>
                            </select>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Annuler</button>
                        <button type="submit" class="btn btn-primary">Enregistrer</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Modal upload -->
    <div class="modal modal-blur fade" id="modal-upload" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Ajouter une pièce jointe</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Fermer"></button>
                </div>
                <div class="modal-body">
                    <div class="mb-3">
                        <div class="form-label">Fichiers</div>
                        <input type="file" class="form-control" multiple>
                        <div class="form-hint">Maximum 10 MB par fichier. Formats acceptés : images, PDF, documents Office</div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Annuler</button>
                    <button type="button" class="btn btn-primary">
                        <i class="ti ti-upload"></i>
                        Télécharger
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Tabler Core -->
    <script src="https://cdn.jsdelivr.net/npm/@tabler/core@1.0.0-beta20/dist/js/tabler.min.js"></script>
    <script src="../assets/js/app.js"></script>
</body>
</html>