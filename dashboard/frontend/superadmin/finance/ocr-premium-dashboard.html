<!doctype html>
<html lang="fr">
<head>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover"/>
    <meta http-equiv="X-UA-Compatible" content="ie=edge"/>
    <title>OCR Premium - Dashboard SuperAdmin</title>
    
    <!-- CSS Files -->
    <link href="https://cdn.jsdelivr.net/npm/@tabler/core@1.0.0-beta20/dist/css/tabler.min.css" rel="stylesheet"/>
    <link href="https://cdn.jsdelivr.net/npm/@tabler/core@1.0.0-beta20/dist/css/tabler-flags.min.css" rel="stylesheet"/>
    <link href="https://cdn.jsdelivr.net/npm/@tabler/core@1.0.0-beta20/dist/css/tabler-payments.min.css" rel="stylesheet"/>
    <link href="https://cdn.jsdelivr.net/npm/@tabler/core@1.0.0-beta20/dist/css/tabler-vendors.min.css" rel="stylesheet"/>
    <style>
      @import url('https://rsms.me/inter/inter.css');
      :root {
      	--tblr-font-sans-serif: 'Inter Var', -apple-system, BlinkMacSystemFont, San Francisco, Segoe UI, Roboto, Helvetica Neue, sans-serif;
      }
      body {
      	font-feature-settings: "cv03", "cv04", "cv11";
      }
      
      /* Animations */
      @keyframes fadeIn {
        from { opacity: 0; transform: translateY(10px); }
        to { opacity: 1; transform: translateY(0); }
      }
      
      @keyframes pulse {
        0%, 100% { transform: scale(1); opacity: 0.8; }
        50% { transform: scale(1.05); opacity: 1; }
      }
      
      @keyframes slideUp {
        from { opacity: 0; transform: translateY(20px); }
        to { opacity: 1; transform: translateY(0); }
      }
      
      .fade-in {
        animation: fadeIn 0.3s ease-out;
      }
      
      .slide-up {
        animation: slideUp 0.4s ease-out;
      }
      
      /* Dropzone am√©lior√©e */
      .dropzone-wrapper {
        position: relative;
        border: 2px dashed var(--tblr-border-color);
        border-radius: var(--tblr-border-radius-lg);
        background: var(--tblr-bg-surface);
        transition: all 0.3s ease;
        cursor: pointer;
        overflow: hidden;
      }
      
      .dropzone-wrapper:hover {
        border-color: var(--tblr-primary);
        background: var(--tblr-bg-surface-secondary);
      }
      
      .dropzone-wrapper.drag-over {
        border-color: var(--tblr-primary);
        background: rgba(var(--tblr-primary-rgb), 0.05);
        transform: scale(1.02);
      }
      
      .dropzone-content {
        padding: 3rem;
        text-align: center;
      }
      
      .dropzone-icon {
        font-size: 4rem;
        color: var(--tblr-primary);
        opacity: 0.3;
        transition: all 0.3s ease;
      }
      
      .dropzone-wrapper:hover .dropzone-icon {
        opacity: 0.6;
        transform: translateY(-5px);
      }
      
      .dropzone-wrapper.drag-over .dropzone-icon {
        opacity: 1;
        animation: pulse 1s infinite;
      }
      
      /* Progress am√©lior√© */
      .progress-wrapper {
        position: relative;
        margin-top: 2rem;
      }
      
      .progress-details {
        display: flex;
        justify-content: space-between;
        margin-bottom: 0.5rem;
        font-size: 0.875rem;
      }
      
      /* Cards avec ombres */
      .card-result {
        box-shadow: 0 0.125rem 0.25rem rgba(0, 0, 0, 0.075);
        transition: all 0.3s ease;
      }
      
      .card-result:hover {
        box-shadow: 0 0.5rem 1rem rgba(0, 0, 0, 0.15);
        transform: translateY(-2px);
      }
      
      /* Badges am√©lior√©s */
      .badge-confidence {
        font-size: 0.875rem;
        padding: 0.5rem 1rem;
        font-weight: 600;
      }
      
      /* File preview */
      .file-preview {
        display: none;
        background: var(--tblr-bg-surface-secondary);
        border-radius: var(--tblr-border-radius);
        padding: 1rem;
        margin-top: 1rem;
        align-items: center;
        gap: 1rem;
      }
      
      .file-preview.show {
        display: flex;
        animation: fadeIn 0.3s ease-out;
      }
      
      .file-preview-icon {
        font-size: 2rem;
        color: var(--tblr-muted);
      }
      
      .file-preview-info {
        flex: 1;
      }
      
      .file-preview-name {
        font-weight: 600;
        margin-bottom: 0.25rem;
      }
      
      .file-preview-size {
        font-size: 0.875rem;
        color: var(--tblr-muted);
      }
      
      /* Result tabs animation */
      .tab-pane {
        animation: fadeIn 0.3s ease-out;
      }
      
      /* Form validation states */
      .form-control.is-valid {
        border-color: var(--tblr-success);
        background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 8 8'%3e%3cpath fill='%2310b981' d='M2.3 6.73.6 4.53c-.4-1.04.46-1.4 1.1-.8l1.1 1.4 3.4-3.8c.6-.63 1.6-.27 1.2.7l-4 4.6c-.43.5-.8.4-1.1.1z'/%3e%3c/svg%3e");
        background-repeat: no-repeat;
        background-position: right calc(0.375em + 0.1875rem) center;
        background-size: calc(0.75em + 0.375rem) calc(0.75em + 0.375rem);
        padding-right: calc(1.5em + 0.75rem);
      }
      
      /* Loading states */
      .skeleton {
        background: linear-gradient(90deg, var(--tblr-bg-surface) 25%, var(--tblr-bg-surface-secondary) 50%, var(--tblr-bg-surface) 75%);
        background-size: 200% 100%;
        animation: loading 1.5s infinite;
      }
      
      @keyframes loading {
        0% { background-position: 200% 0; }
        100% { background-position: -200% 0; }
      }
      
      /* Toast notifications */
      .toast-container {
        position: fixed;
        top: 1rem;
        right: 1rem;
        z-index: 1050;
      }
    </style>
</head>
<body>
    <!-- Removed demo-theme.min.js - file not found -->
    <div class="page">
        <!-- Sidebar -->
        <aside class="navbar navbar-vertical navbar-expand-lg" data-bs-theme="dark">
            <div class="container-fluid">
                <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#sidebar-menu" aria-controls="sidebar-menu" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>
                <h1 class="navbar-brand navbar-brand-autodark">
                    <a href="../dashboard.html">
                        <img src="../../assets/img/logo.svg" width="110" height="32" alt="Tabler" class="navbar-brand-image">
                    </a>
                </h1>
                <div class="collapse navbar-collapse" id="sidebar-menu">
                    <ul class="navbar-nav pt-lg-3">
                        <li class="nav-item">
                            <a class="nav-link" href="../dashboard.html">
                                <span class="nav-link-icon d-md-none d-lg-inline-block">
                                    <svg xmlns="http://www.w3.org/2000/svg" class="icon" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M5 12l-2 0l9 -9l9 9l-2 0"/><path d="M5 12v7a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-7"/><path d="M9 21v-6a2 2 0 0 1 2 -2h2a2 2 0 0 1 2 2v6"/></svg>
                                </span>
                                <span class="nav-link-title">
                                    Dashboard
                                </span>
                            </a>
                        </li>
                        <li class="nav-item dropdown">
                            <a class="nav-link dropdown-toggle" href="#navbar-finance" data-bs-toggle="dropdown" data-bs-auto-close="false" role="button" aria-expanded="true">
                                <span class="nav-link-icon d-md-none d-lg-inline-block">
                                    <svg xmlns="http://www.w3.org/2000/svg" class="icon" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M17 8v-3a1 1 0 0 0 -1 -1h-10a2 2 0 0 0 0 4h12a1 1 0 0 1 1 1v3m0 4v3a1 1 0 0 1 -1 1h-12a2 2 0 0 1 -2 -2v-12"/><path d="M20 12v4h-4a2 2 0 0 1 0 -4h4"/></svg>
                                </span>
                                <span class="nav-link-title">
                                    Finance
                                </span>
                            </a>
                            <div class="dropdown-menu">
                                <div class="dropdown-menu-columns">
                                    <div class="dropdown-menu-column">
                                        <a class="dropdown-item active" href="./ocr-premium-dashboard.html">
                                            <span class="nav-link-icon d-md-none d-lg-inline-block">
                                                <svg xmlns="http://www.w3.org/2000/svg" class="icon" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M14 3v4a1 1 0 0 0 1 1h4"/><path d="M17 21h-10a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h7l5 5v11a2 2 0 0 1 -2 2z"/><path d="M12 17v-6"/><path d="M9.5 14.5l2.5 2.5l2.5 -2.5"/></svg>
                                            </span>
                                            OCR Premium
                                        </a>
                                        <a class="dropdown-item" href="./invoices-out.html">
                                            Factures √âmises
                                        </a>
                                        <a class="dropdown-item" href="./invoices-in.html">
                                            Factures Re√ßues
                                        </a>
                                        <a class="dropdown-item" href="./expenses.html">
                                            Notes de Frais
                                        </a>
                                    </div>
                                </div>
                            </div>
                        </li>
                    </ul>
                </div>
            </div>
        </aside>
        
        <!-- Page Wrapper -->
        <div class="page-wrapper">
            <!-- Page header -->
            <div class="page-header d-print-none">
                <div class="container-xl">
                    <div class="row g-2 align-items-center">
                        <div class="col">
                            <div class="page-pretitle">
                                Syst√®me Finance
                            </div>
                            <h2 class="page-title">
                                OCR Premium - Reconnaissance Intelligente
                            </h2>
                        </div>
                        <div class="col-auto ms-auto d-print-none">
                            <div class="btn-list">
                                <a href="./invoices-out.html" class="btn btn-outline-primary">
                                    Factures √âmises
                                </a>
                                <a href="./invoices-in.html" class="btn btn-outline-primary">
                                    Factures Re√ßues
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Page body -->
            <div class="page-body">
                <div class="container-xl">
                    <div class="row row-deck row-cards">
                        
                        <!-- Card Upload -->
                        <div class="col-12">
                            <div class="card">
                                <div class="card-header">
                                    <h3 class="card-title">
                                        <svg xmlns="http://www.w3.org/2000/svg" class="icon me-2" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M14 3v4a1 1 0 0 0 1 1h4"/><path d="M17 21h-10a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h7l5 5v11a2 2 0 0 1 -2 2z"/><path d="M12 17v-6"/><path d="M9.5 14.5l2.5 2.5l2.5 -2.5"/></svg>
                                        OCR Vision AI Premium
                                    </h3>
                                    <div class="card-actions">
                                        <button class="btn btn-outline-primary btn-sm" data-bs-toggle="modal" data-bs-target="#settings-modal">
                                            <svg xmlns="http://www.w3.org/2000/svg" class="icon" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M10.325 4.317c.426 -1.756 2.924 -1.756 3.35 0a1.724 1.724 0 0 0 2.573 1.066c1.543 -.94 3.31 .826 2.37 2.37a1.724 1.724 0 0 0 1.065 2.572c1.756 .426 1.756 2.924 0 3.35a1.724 1.724 0 0 0 -1.066 2.573c.94 1.543 -.826 3.31 -2.37 2.37a1.724 1.724 0 0 0 -2.572 1.065c-.426 1.756 -2.924 1.756 -3.35 0a1.724 1.724 0 0 0 -2.573 -1.066c-1.543 .94 -3.31 -.826 -2.37 -2.37a1.724 1.724 0 0 0 -1.065 -2.572c-1.756 -.426 -1.756 -2.924 0 -3.35a1.724 1.724 0 0 0 1.066 -2.573c-.94 -1.543 .826 -3.31 2.37 -2.37c1 .608 2.296 .07 2.572 -1.065z"/><path d="M9 12a3 3 0 1 0 6 0a3 3 0 0 0 -6 0"/></svg>
                                            Param√®tres
                                        </button>
                                        <div class="ms-2">
                                            <span class="badge badge-sm" id="model-badge">gpt-4o-mini</span>
                                        </div>
                                    </div>
                                </div>
                                <div class="card-body">
                                    <!-- Zone de drop am√©lior√©e -->
                                    <div class="dropzone-wrapper" id="dropzone">
                                        <div class="dropzone-content">
                                            <svg xmlns="http://www.w3.org/2000/svg" class="icon dropzone-icon" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
                                                <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
                                                <path d="M14 3v4a1 1 0 0 0 1 1h4"/>
                                                <path d="M17 21h-10a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h7l5 5v11a2 2 0 0 1 -2 2z"/>
                                                <path d="M12 17v-6"/>
                                                <path d="M9.5 14.5l2.5 2.5l2.5 -2.5"/>
                                            </svg>
                                            <h3 class="mt-4">Glissez votre document ici</h3>
                                            <p class="text-secondary">ou cliquez pour parcourir</p>
                                            <div class="mt-3">
                                                <span class="badge bg-secondary-lt">PDF</span>
                                                <span class="badge bg-secondary-lt">JPG</span>
                                                <span class="badge bg-secondary-lt">PNG</span>
                                                <span class="badge bg-secondary-lt">WEBP</span>
                                            </div>
                                            <p class="text-secondary small mt-3">Taille max: 20MB</p>
                                        </div>
                                        <input type="file" class="d-none" id="document-upload" accept=".pdf,.jpg,.jpeg,.png,.webp">
                                    </div>
                                    
                                    <!-- Preview du fichier -->
                                    <div class="file-preview" id="file-preview">
                                        <svg xmlns="http://www.w3.org/2000/svg" class="icon file-preview-icon" id="file-icon" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
                                            <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
                                            <path d="M14 3v4a1 1 0 0 0 1 1h4"/>
                                            <path d="M17 21h-10a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h7l5 5v11a2 2 0 0 1 -2 2z"/>
                                        </svg>
                                        <div class="file-preview-info">
                                            <div class="file-preview-name" id="file-name">Document.pdf</div>
                                            <div class="file-preview-size" id="file-size">1.2 MB</div>
                                        </div>
                                        <button class="btn btn-ghost-danger btn-sm" id="remove-file">
                                            <svg xmlns="http://www.w3.org/2000/svg" class="icon" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M18 6l-12 12"/><path d="M6 6l12 12"/></svg>
                                        </button>
                                    </div>
                                    
                                    <!-- Progress am√©lior√© -->
                                    <div class="progress-wrapper d-none" id="upload-progress">
                                        <div class="progress-details">
                                            <span id="progress-status">Initialisation...</span>
                                            <span id="progress-text">0%</span>
                                        </div>
                                        <div class="progress">
                                            <div class="progress-bar progress-bar-indeterminate" id="progress-bar" role="progressbar"></div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Results Section -->
                        <div class="col-12 d-none" id="results-section">
                            <div class="card card-result">
                                <div class="card-header">
                                    <h3 class="card-title">
                                        <svg xmlns="http://www.w3.org/2000/svg" class="icon me-2" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M9 11l3 3l8 -8"/><path d="M20 12v6a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h9"/></svg>
                                        R√©sultats de l'Analyse IA
                                    </h3>
                                    <div class="card-actions">
                                        <span class="badge bg-success" id="confidence-badge">Confiance: 95%</span>
                                        <span class="badge bg-blue ms-2" id="type-badge">Type: Facture Client</span>
                                    </div>
                                </div>
                                
                                <div class="card-header">
                                    <ul class="nav nav-tabs card-header-tabs" data-bs-toggle="tabs">
                                        <li class="nav-item">
                                            <a href="#tabs-extracted" class="nav-link active" data-bs-toggle="tab">
                                                <svg xmlns="http://www.w3.org/2000/svg" class="icon me-2" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M14 3v4a1 1 0 0 0 1 1h4"/><path d="M17 21h-10a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h7l5 5v11a2 2 0 0 1 -2 2z"/><path d="M9 7l1 0"/><path d="M9 13l6 0"/><path d="M13 17l2 0"/></svg>
                                                Donn√©es Extraites
                                            </a>
                                        </li>
                                        <li class="nav-item">
                                            <a href="#tabs-validation" class="nav-link" data-bs-toggle="tab">
                                                <svg xmlns="http://www.w3.org/2000/svg" class="icon me-2" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M9 11l3 3l8 -8"/><path d="M20 12v6a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h9"/></svg>
                                                Validation & Correction
                                            </a>
                                        </li>
                                        <li class="nav-item">
                                            <a href="#tabs-notion" class="nav-link" data-bs-toggle="tab">
                                                <svg xmlns="http://www.w3.org/2000/svg" class="icon me-2" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M12 3c7.2 0 9 1.8 9 9s-1.8 9 -9 9s-9 -1.8 -9 -9s1.8 -9 9 -9z"/></svg>
                                                Base Notion Cible
                                            </a>
                                        </li>
                                    </ul>
                                </div>
                                
                                <div class="card-body">
                                    <div class="tab-content">
                                        <!-- Tab Donn√©es Extraites -->
                                        <div class="tab-pane active show" id="tabs-extracted">
                                            <div class="row">
                                                <div class="col-md-6">
                                                    <div class="card">
                                                        <div class="card-header">
                                                            <h4 class="card-title">Aper√ßu Document</h4>
                                                        </div>
                                                        <div class="card-body">
                                                            <div id="document-preview" class="text-center">
                                                                <!-- Preview will be injected here -->
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="col-md-6">
                                                    <div class="card">
                                                        <div class="card-header">
                                                            <h4 class="card-title">Informations D√©tect√©es</h4>
                                                            <div class="card-actions">
                                                                <div class="badge bg-blue-lt" id="document-type-badge">
                                                                    Type: Non d√©tect√©
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="card-body">
                                                            <div id="extracted-info">
                                                                <!-- Extracted data will be injected here -->
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        
                                        <!-- Tab Validation -->
                                        <div class="tab-pane" id="tabs-validation">
                                            <div class="row">
                                                <div class="col-md-8">
                                                    <div id="validation-form-container">
                                                        <!-- Form will be injected here -->
                                                    </div>
                                                </div>
                                                <div class="col-md-4">
                                                    <div class="card">
                                                        <div class="card-body">
                                                            <h3 class="card-title">Actions</h3>
                                                            <div class="d-grid gap-2">
                                                                <button class="btn btn-success" id="btn-send-notion">
                                                                    <svg xmlns="http://www.w3.org/2000/svg" class="icon me-2" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M22 7.535v9.465a3 3 0 0 1 -2.824 2.995l-.176 .005h-14a3 3 0 0 1 -2.995 -2.824l-.005 -.176v-9.465l9.445 6.297l.116 .066a1 1 0 0 0 .878 0l.116 -.066l9.445 -6.297z"/><path d="M19 4c1.08 0 2.027 .57 2.555 1.427l-9.555 6.37l-9.555 -6.37a2.999 2.999 0 0 1 2.354 -1.42l.201 -.007h14z"/></svg>
                                                                    Envoyer vers Notion
                                                                </button>
                                                                <button class="btn btn-outline-primary" id="btn-preview-data">
                                                                    <svg xmlns="http://www.w3.org/2000/svg" class="icon me-2" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M10 12a2 2 0 1 0 4 0a2 2 0 0 0 -4 0"/><path d="M21 12c-2.4 4 -5.4 6 -9 6c-3.6 0 -6.6 -2 -9 -6c2.4 -4 5.4 -6 9 -6c3.6 0 6.6 2 9 6"/></svg>
                                                                    Pr√©visualiser
                                                                </button>
                                                                <button class="btn btn-outline-secondary" id="btn-export-json">
                                                                    <svg xmlns="http://www.w3.org/2000/svg" class="icon me-2" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 17v2a2 2 0 0 0 2 2h12a2 2 0 0 0 2 -2v-2"/><path d="M7 11l5 5l5 -5"/><path d="M12 4l0 12"/></svg>
                                                                    Exporter JSON
                                                                </button>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        
                                        <!-- Tab Notion -->
                                        <div class="tab-pane" id="tabs-notion">
                                            <div id="notion-mapping">
                                                <!-- Notion mapping will be injected here -->
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Toast Container -->
    <div class="toast-container"></div>
    
    <!-- Settings Modal -->
    <div class="modal modal-blur fade" id="settings-modal" tabindex="-1">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Param√®tres OCR</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <div class="mb-3">
                        <label class="form-label">Cl√© API OpenAI</label>
                        <input type="password" class="form-control" id="api-key-input" placeholder="sk-...">
                        <small class="form-hint">Votre cl√© API pour utiliser GPT-4 Vision</small>
                    </div>
                    <div class="mb-3">
                        <label class="form-label">Cl√© API Notion</label>
                        <input type="password" class="form-control" id="notion-api-key-input" placeholder="secret_...">
                        <small class="form-hint">Votre cl√© d'int√©gration Notion pour sauvegarder les documents</small>
                    </div>
                    <div class="mb-3">
                        <label class="form-label">Mod√®le par d√©faut</label>
                        <select class="form-select" id="default-model">
                            <option value="gpt-4o-mini">GPT-4o Mini (Rapide)</option>
                            <option value="gpt-4o">GPT-4o (Pr√©cision Max)</option>
                        </select>
                    </div>
                    <div class="alert alert-info">
                        <h5 class="alert-title">Configuration Notion</h5>
                        <p class="mb-2">Pour obtenir votre cl√© API Notion:</p>
                        <ol class="mb-0">
                            <li>Allez sur <a href="https://www.notion.so/my-integrations" target="_blank">notion.so/my-integrations</a></li>
                            <li>Cr√©ez une nouvelle int√©gration</li>
                            <li>Copiez la cl√© "Internal Integration Secret"</li>
                            <li>Partagez vos bases de donn√©es avec l'int√©gration</li>
                        </ol>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Annuler</button>
                    <button type="button" class="btn btn-primary" onclick="window.ocrInterface.saveSettings()">Sauvegarder</button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Libs JS -->
    <script src="https://cdn.jsdelivr.net/npm/@tabler/core@1.0.0-beta20/dist/js/tabler.min.js"></script>
    
    <!-- PDF.js -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.min.js"></script>
    <script>
        pdfjsLib.GlobalWorkerOptions.workerSrc = 'https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.worker.min.js';
    </script>
    
    <!-- Override Notion pour √©viter CORS en mode file:// -->
    <script>
        // Override de l'init de Notion pour √©viter l'erreur
        window.OCRNotionIntegrationOriginal = window.OCRNotionIntegration;
        
        window.OCRNotionIntegration = class extends (window.OCRNotionIntegrationOriginal || class {}) {
            async init() {
                if (window.location.protocol === 'file:') {
                    console.log('üìÅ Mode fichier local - Notion en mode simulation');
                    return true;
                }
                return super.init ? super.init() : true;
            }
            
            async makeRequest(endpoint, method = 'GET', body = null) {
                if (window.location.protocol === 'file:') {
                    console.log('üìÅ Simulation requ√™te Notion:', endpoint);
                    return { success: true, simulation: true };
                }
                return super.makeRequest ? super.makeRequest(endpoint, method, body) : {};
            }
        };
    </script>
    
    <!-- TES JS OCR -->
    <script src="../../assets/js/Superadmin/ocr-templates-final.js"></script>
    <script src="../../assets/js/Superadmin/ocr-vision-final.js"></script>
    <script src="../../assets/js/Superadmin/ocr-notion-integration.js"></script>
    <script src="../../assets/js/Superadmin/ocr-notion-smart-resolver.js"></script>
    <script src="../../assets/js/Superadmin/ocr-interface-final.js"></script>
    
    <!-- Configuration drag & drop ULTRA simple -->
    <script>
        // Protection globale imm√©diate
        window.addEventListener('dragover', function(e) {
            e.preventDefault();
            return false;
        }, false);
        
        window.addEventListener('drop', function(e) {
            e.preventDefault();
            return false;
        }, false);
        
        document.addEventListener('DOMContentLoaded', function() {
            console.log('üõ°Ô∏è Configuration drag & drop simplifi√©e');
            
            const dropzone = document.getElementById('dropzone');
            const fileInput = document.getElementById('document-upload');
            
            if (!dropzone || !fileInput) {
                console.error('‚ùå √âl√©ments manquants');
                return;
            }
            
            // Click pour s√©lectionner
            dropzone.onclick = function() {
                fileInput.click();
            };
            
            // Gestion des fichiers s√©lectionn√©s
            fileInput.onchange = function(e) {
                if (e.target.files.length > 0) {
                    console.log('üìÑ Fichier s√©lectionn√©:', e.target.files[0].name);
                    if (window.ocrInterface) {
                        window.ocrInterface.handleFileUpload(e.target.files[0]);
                    } else {
                        console.error('‚ùå ocrInterface non disponible');
                    }
                }
            };
            
            // Drag over
            dropzone.ondragover = function(e) {
                e.preventDefault();
                e.stopPropagation();
                this.classList.add('drag-over');
                return false;
            };
            
            // Drag leave
            dropzone.ondragleave = function(e) {
                e.preventDefault();
                e.stopPropagation();
                this.classList.remove('drag-over');
                return false;
            };
            
            // Drop
            dropzone.ondrop = function(e) {
                e.preventDefault();
                e.stopPropagation();
                this.classList.remove('drag-over');
                
                const files = e.dataTransfer.files;
                console.log('üìÑ Drop d√©tect√©:', files.length, 'fichier(s)');
                
                if (files.length > 0) {
                    const file = files[0];
                    console.log('üìÑ Fichier:', file.name, file.type, file.size);
                    
                    if (window.ocrInterface) {
                        window.ocrInterface.handleFileUpload(file);
                    } else {
                        console.error('‚ùå ocrInterface non disponible');
                    }
                }
                
                return false;
            };
            
            console.log('‚úÖ Drag & drop configur√©');
        });
    </script>
</body>
</html>