{
  "permissions": {
    "allow": [
      "Bash(cat:*)",
      "Bash(npx ramidecodes/mcp-server-notion:*)",
      "Bash(find:*)",
      "Bash(claude doctor)",
      "Bash(claude mcp:*)",
      "mcp__notion__search",
      "Bash(ls:*)",
      "mcp__notion__list-databases",
      "Bash(mcp list:*)",
      "Bash(echo)",
      "Bash(touch:*)",
      "Bash(# Lire la structure des scripts dans tous les fichiers HTML des trois espaces\nfor space in client prestataire revendeur; do\n    echo \"\"=== ESPACE $space ===\"\"\n    for file in \"\"/Users/jean-mariedelaunay/Dashboard Client: Presta/portal-project/$space\"\"/*.html; do\n        if [ -f \"\"$file\"\" ]; then\n            filename=$(basename \"\"$file\"\")\n            echo -e \"\"\\n--- $filename ---\"\"\n            grep -B 2 -A 2 \"\"auth-notion.js\"\" \"\"$file\"\" 2>/dev/null || echo \"\"auth-notion.js non trouvé\"\"\n        fi\n    done\ndone)",
      "Bash(#!/bin/bash\n\n# Liste des fichiers à modifier\nfiles=(\n    # Client\n    \"\"/Users/jean-mariedelaunay/Dashboard Client: Presta/portal-project/client/document-preview.html\"\"\n    \"\"/Users/jean-mariedelaunay/Dashboard Client: Presta/portal-project/client/documents.html\"\"\n    \"\"/Users/jean-mariedelaunay/Dashboard Client: Presta/portal-project/client/finances.html\"\"\n    \"\"/Users/jean-mariedelaunay/Dashboard Client: Presta/portal-project/client/invoice-detail.html\"\"\n    \"\"/Users/jean-mariedelaunay/Dashboard Client: Presta/portal-project/client/payment.html\"\"\n    \n    # Prestataire\n    \"\"/Users/jean-mariedelaunay/Dashboard Client: Presta/portal-project/prestataire/dashboard.html\"\"\n    \"\"/Users/jean-mariedelaunay/Dashboard Client: Presta/portal-project/prestataire/missions.html\"\"\n    \"\"/Users/jean-mariedelaunay/Dashboard Client: Presta/portal-project/prestataire/mission-detail.html\"\"\n    \"\"/Users/jean-mariedelaunay/Dashboard Client: Presta/portal-project/prestataire/calendar.html\"\"\n    \"\"/Users/jean-mariedelaunay/Dashboard Client: Presta/portal-project/prestataire/tasks.html\"\"\n    \"\"/Users/jean-mariedelaunay/Dashboard Client: Presta/portal-project/prestataire/rewards.html\"\"\n    \"\"/Users/jean-mariedelaunay/Dashboard Client: Presta/portal-project/prestataire/performance.html\"\"\n    \"\"/Users/jean-mariedelaunay/Dashboard Client: Presta/portal-project/prestataire/messages.html\"\"\n    \"\"/Users/jean-mariedelaunay/Dashboard Client: Presta/portal-project/prestataire/knowledge.html\"\"\n    \"\"/Users/jean-mariedelaunay/Dashboard Client: Presta/portal-project/prestataire/knowledge-article.html\"\"\n    \n    # Revendeur\n    \"\"/Users/jean-mariedelaunay/Dashboard Client: Presta/portal-project/revendeur/dashboard.html\"\"\n    \"\"/Users/jean-mariedelaunay/Dashboard Client: Presta/portal-project/revendeur/pipeline.html\"\"\n    \"\"/Users/jean-mariedelaunay/Dashboard Client: Presta/portal-project/revendeur/clients.html\"\"\n    \"\"/Users/jean-mariedelaunay/Dashboard Client: Presta/portal-project/revendeur/client-detail.html\"\"\n    \"\"/Users/jean-mariedelaunay/Dashboard Client: Presta/portal-project/revendeur/leads.html\"\"\n    \"\"/Users/jean-mariedelaunay/Dashboard Client: Presta/portal-project/revendeur/commissions.html\"\"\n    \"\"/Users/jean-mariedelaunay/Dashboard Client: Presta/portal-project/revendeur/marketing.html\"\"\n    \"\"/Users/jean-mariedelaunay/Dashboard Client: Presta/portal-project/revendeur/reports.html\"\"\n)\n\n# Fonction pour insérer permissions-notion.js après auth-notion.js\nfor file in \"\"${files[@]}\"\"; do\n    if [ -f \"\"$file\"\" ]; then\n        # Vérifier si permissions-notion.js n''est pas déjà présent\n        if ! grep -q \"\"permissions-notion.js\"\" \"\"$file\"\"; then\n            # Insérer permissions-notion.js après auth-notion.js\n            sed -i '''' ''/<script src=\"\"..\\/assets\\/js\\/auth-notion.js\"\"><\\/script>/a\\\n    <script src=\"\"../assets/js/permissions-notion.js\"\"></script>'' \"\"$file\"\"\n            echo \"\"✅ Modifié: $(basename \"\"$file\"\")\"\"\n        else\n            echo \"\"⏭️  Déjà modifié: $(basename \"\"$file\"\")\"\"\n        fi\n    else\n        echo \"\"❌ Fichier non trouvé: $file\"\"\n    fi\ndone\n\necho -e \"\"\\n✨ Modification terminée !\"\")",
      "Bash(# Vérifier quelques fichiers pour confirmer la présence de permissions-notion.js\necho \"\"=== Vérification de quelques fichiers ===\"\"\necho -e \"\"\\n--- Client: documents.html ---\"\"\ngrep -A 2 -B 2 \"\"permissions-notion.js\"\" \"\"/Users/jean-mariedelaunay/Dashboard Client: Presta/portal-project/client/documents.html\"\"\n\necho -e \"\"\\n--- Prestataire: missions.html ---\"\"\ngrep -A 2 -B 2 \"\"permissions-notion.js\"\" \"\"/Users/jean-mariedelaunay/Dashboard Client: Presta/portal-project/prestataire/missions.html\"\"\n\necho -e \"\"\\n--- Revendeur: pipeline.html ---\"\"\ngrep -A 2 -B 2 \"\"permissions-notion.js\"\" \"\"/Users/jean-mariedelaunay/Dashboard Client: Presta/portal-project/revendeur/pipeline.html\"\")",
      "Bash(# Vérifier la structure actuelle de quelques fichiers\necho \"\"=== Structure actuelle ===\"\"\necho -e \"\"\\n--- Client: documents.html ---\"\"\ngrep -A 3 \"\"auth-notion.js\"\" \"\"/Users/jean-mariedelaunay/Dashboard Client: Presta/portal-project/client/documents.html\"\"\n\necho -e \"\"\\n--- Prestataire: missions.html ---\"\"\ngrep -A 3 \"\"auth-notion.js\"\" \"\"/Users/jean-mariedelaunay/Dashboard Client: Presta/portal-project/prestataire/missions.html\"\"\n\necho -e \"\"\\n--- Revendeur: pipeline.html ---\"\"\ngrep -A 3 \"\"auth-notion.js\"\" \"\"/Users/jean-mariedelaunay/Dashboard Client: Presta/portal-project/revendeur/pipeline.html\"\")",
      "Bash(#!/bin/bash\n\n# Fonction pour modifier un fichier\nmodify_file() {\n    local file=\"\"$1\"\"\n    local filename=$(basename \"\"$file\"\")\n    \n    if [ -f \"\"$file\"\" ]; then\n        # Créer une copie temporaire\n        cp \"\"$file\"\" \"\"${file}.tmp\"\"\n        \n        # Remplacer auth-notion.js par auth-notion.js + permissions-notion.js\n        awk ''\n        /<script src=\"\"\\.\\.\\/assets\\/js\\/auth-notion\\.js\"\"><\\/script>/ {\n            print $0\n            print \"\"    <script src=\\\"\"../assets/js/permissions-notion.js\\\"\"></script>\"\"\n            next\n        }\n        { print }\n        '' \"\"${file}.tmp\"\" > \"\"$file\"\"\n        \n        # Supprimer le fichier temporaire\n        rm \"\"${file}.tmp\"\"\n        \n        echo \"\"✅ Modifié: $filename\"\"\n    else\n        echo \"\"❌ Fichier non trouvé: $file\"\"\n    fi\n}\n\n# Modifier tous les fichiers client\necho \"\"=== Modification des fichiers Client ===\"\"\nmodify_file \"\"/Users/jean-mariedelaunay/Dashboard Client: Presta/portal-project/client/document-preview.html\"\"\nmodify_file \"\"/Users/jean-mariedelaunay/Dashboard Client: Presta/portal-project/client/documents.html\"\"\nmodify_file \"\"/Users/jean-mariedelaunay/Dashboard Client: Presta/portal-project/client/finances.html\"\"\nmodify_file \"\"/Users/jean-mariedelaunay/Dashboard Client: Presta/portal-project/client/invoice-detail.html\"\"\nmodify_file \"\"/Users/jean-mariedelaunay/Dashboard Client: Presta/portal-project/client/payment.html\"\")",
      "Bash(# Modifier tous les fichiers prestataire\necho \"\"=== Modification des fichiers Prestataire ===\"\"\nmodify_file() {\n    local file=\"\"$1\"\"\n    local filename=$(basename \"\"$file\"\")\n    \n    if [ -f \"\"$file\"\" ]; then\n        cp \"\"$file\"\" \"\"${file}.tmp\"\"\n        awk ''\n        /<script src=\"\"\\.\\.\\/assets\\/js\\/auth-notion\\.js\"\"><\\/script>/ {\n            print $0\n            print \"\"    <script src=\\\"\"../assets/js/permissions-notion.js\\\"\"></script>\"\"\n            next\n        }\n        { print }\n        '' \"\"${file}.tmp\"\" > \"\"$file\"\"\n        rm \"\"${file}.tmp\"\"\n        echo \"\"✅ Modifié: $filename\"\"\n    else\n        echo \"\"❌ Fichier non trouvé: $file\"\"\n    fi\n}\n\nmodify_file \"\"/Users/jean-mariedelaunay/Dashboard Client: Presta/portal-project/prestataire/dashboard.html\"\"\nmodify_file \"\"/Users/jean-mariedelaunay/Dashboard Client: Presta/portal-project/prestataire/missions.html\"\"\nmodify_file \"\"/Users/jean-mariedelaunay/Dashboard Client: Presta/portal-project/prestataire/mission-detail.html\"\"\nmodify_file \"\"/Users/jean-mariedelaunay/Dashboard Client: Presta/portal-project/prestataire/calendar.html\"\"\nmodify_file \"\"/Users/jean-mariedelaunay/Dashboard Client: Presta/portal-project/prestataire/tasks.html\"\"\nmodify_file \"\"/Users/jean-mariedelaunay/Dashboard Client: Presta/portal-project/prestataire/rewards.html\"\"\nmodify_file \"\"/Users/jean-mariedelaunay/Dashboard Client: Presta/portal-project/prestataire/performance.html\"\"\nmodify_file \"\"/Users/jean-mariedelaunay/Dashboard Client: Presta/portal-project/prestataire/messages.html\"\"\nmodify_file \"\"/Users/jean-mariedelaunay/Dashboard Client: Presta/portal-project/prestataire/knowledge.html\"\"\nmodify_file \"\"/Users/jean-mariedelaunay/Dashboard Client: Presta/portal-project/prestataire/knowledge-article.html\"\")",
      "Bash(# Modifier tous les fichiers revendeur\necho \"\"=== Modification des fichiers Revendeur ===\"\"\nmodify_file() {\n    local file=\"\"$1\"\"\n    local filename=$(basename \"\"$file\"\")\n    \n    if [ -f \"\"$file\"\" ]; then\n        cp \"\"$file\"\" \"\"${file}.tmp\"\"\n        awk ''\n        /<script src=\"\"\\.\\.\\/assets\\/js\\/auth-notion\\.js\"\"><\\/script>/ {\n            print $0\n            print \"\"    <script src=\\\"\"../assets/js/permissions-notion.js\\\"\"></script>\"\"\n            next\n        }\n        { print }\n        '' \"\"${file}.tmp\"\" > \"\"$file\"\"\n        rm \"\"${file}.tmp\"\"\n        echo \"\"✅ Modifié: $filename\"\"\n    else\n        echo \"\"❌ Fichier non trouvé: $file\"\"\n    fi\n}\n\nmodify_file \"\"/Users/jean-mariedelaunay/Dashboard Client: Presta/portal-project/revendeur/dashboard.html\"\"\nmodify_file \"\"/Users/jean-mariedelaunay/Dashboard Client: Presta/portal-project/revendeur/pipeline.html\"\"\nmodify_file \"\"/Users/jean-mariedelaunay/Dashboard Client: Presta/portal-project/revendeur/clients.html\"\"\nmodify_file \"\"/Users/jean-mariedelaunay/Dashboard Client: Presta/portal-project/revendeur/client-detail.html\"\"\nmodify_file \"\"/Users/jean-mariedelaunay/Dashboard Client: Presta/portal-project/revendeur/leads.html\"\"\nmodify_file \"\"/Users/jean-mariedelaunay/Dashboard Client: Presta/portal-project/revendeur/commissions.html\"\"\nmodify_file \"\"/Users/jean-mariedelaunay/Dashboard Client: Presta/portal-project/revendeur/marketing.html\"\"\nmodify_file \"\"/Users/jean-mariedelaunay/Dashboard Client: Presta/portal-project/revendeur/reports.html\"\")",
      "Bash(# Vérifier que toutes les modifications ont été appliquées\necho \"\"=== Vérification finale ===\"\"\necho -e \"\"\\nFichiers modifiés (avec permissions-notion.js) :\"\"\n\n# Compter les fichiers avec permissions-notion.js\ntotal_files=0\nmodified_files=0\n\nfor space in client prestataire revendeur; do\n    echo -e \"\"\\n$space :\"\"\n    for file in \"\"/Users/jean-mariedelaunay/Dashboard Client: Presta/portal-project/$space\"\"/*.html; do\n        if [ -f \"\"$file\"\" ] && grep -q \"\"auth-notion.js\"\" \"\"$file\"\"; then\n            ((total_files++))\n            if grep -q \"\"permissions-notion.js\"\" \"\"$file\"\"; then\n                ((modified_files++))\n                echo \"\"  ✅ $(basename \"\"$file\"\")\"\"\n            else\n                echo \"\"  ❌ $(basename \"\"$file\"\") - permissions-notion.js manquant\"\"\n            fi\n        fi\n    done\ndone\n\necho -e \"\"\\n=== Résumé ===\"\"\necho \"\"Total de fichiers avec auth-notion.js : $total_files\"\"\necho \"\"Fichiers modifiés avec permissions-notion.js : $modified_files\"\"\necho \"\"Taux de réussite : $((modified_files * 100 / total_files))%\"\")",
      "Bash(# Vérifier un exemple de chaque espace pour confirmer l''ordre correct\necho \"\"=== Vérification de l''ordre des scripts ===\"\"\n\necho -e \"\"\\n--- Client: projects.html ---\"\"\ngrep -A 5 \"\"notion-connector.js\"\" \"\"/Users/jean-mariedelaunay/Dashboard Client: Presta/portal-project/client/projects.html\"\" | grep -E \"\"(notion-connector|auth-notion|permissions-notion|projects)\"\"\n\necho -e \"\"\\n--- Prestataire: missions.html ---\"\"\ngrep -A 5 \"\"notion-connector.js\"\" \"\"/Users/jean-mariedelaunay/Dashboard Client: Presta/portal-project/prestataire/missions.html\"\" | grep -E \"\"(notion-connector|auth-notion|permissions-notion|missions)\"\"\n\necho -e \"\"\\n--- Revendeur: pipeline.html ---\"\"\ngrep -A 5 \"\"notion-connector.js\"\" \"\"/Users/jean-mariedelaunay/Dashboard Client: Presta/portal-project/revendeur/pipeline.html\"\" | grep -E \"\"(notion-connector|auth-notion|permissions-notion|pipeline)\"\")",
      "Bash(mkdir:*)",
      "Bash(grep:*)",
      "Bash(chmod:*)",
      "Bash(cd:*)",
      "Bash(cd:*)",
      "Bash(cd:*)",
      "Bash(tree:*)",
      "Bash(open login.html)",
      "Bash(open superadmin/dashboard.html)",
      "Bash(rm:*)",
      "Bash(mv:*)",
      "mcp__github__search_repositories",
      "Bash(gh:*)",
      "mcp__github__get_repository",
      "WebFetch(domain:raw.githubusercontent.com)",
      "WebFetch(domain:preview.tabler.io)",
      "Bash(./fix-all-pages.sh:*)",
      "WebFetch(domain:github.com)",
      "Bash(cd:*)",
      "Bash(env)",
      "Bash(python3:*)",
      "Bash(env)",
      "mcp__notion__create-page",
      "mcp__notion__get_page",
      "mcp__notion__query-database",
      "Bash(open audit-dashboard.html)",
      "Bash(cd:*)",
      "Bash(cd:*)",
      "Bash(npm i:*)",
      "Bash(npx:*)",
      "Bash(cp:*)",
      "Bash(docker-compose up:*)",
      "Bash(curl:*)",
      "Bash(node:*)",
      "Bash(docker-compose:*)",
      "Bash(open:*)",
      "Bash(php:*)",
      "Bash(sudo npm install -g @anthropic-ai/claude-code)",
      "Bash(true)",
      "Bash(git --version)",
      "Bash(git init:*)",
      "Bash(git add:*)",
      "Bash(git commit:*)",
      "Bash(git config:*)",
      "Bash(git remote add:*)",
      "Bash(git remote set-url:*)",
      "Bash(git rm:*)",
      "Bash(git push:*)",
      "Bash(./create-repo.sh:*)",
      "Bash(brew:*)",
      "Bash(echo:*)",
      "Bash(git remote:*)",
      "Bash(git branch:*)",
      "Bash(GIT_TRACE=1 GIT_CURL_VERBOSE=1 git push -u origin main)",
      "Bash(git fetch:*)",
      "Bash(pkill:*)",
      "Bash(git pull:*)",
      "Bash(npm start)",
      "Bash(PORT=3000 npm start)",
      "Bash(npm run:*)",
      "Bash(gtimeout:*)",
      "Bash(./update-menus.sh:*)",
      "Bash(claude --version)",
      "Bash(osascript:*)",
      "Bash(\"/Users/jean-mariedelaunay/Dashboard Client: Presta/create-twenty-api-key.sh\")",
      "Bash(\"/Users/jean-mariedelaunay/Dashboard Client: Presta/create-twenty-api-key-v2.sh\")",
      "Bash(\"/Users/jean-mariedelaunay/Dashboard Client: Presta/create-twenty-api-key-v3.sh\")",
      "Bash(docker exec:*)",
      "Bash(docker logs:*)",
      "Bash(/Users/jean-mariedelaunay/Dashboard Client: Presta/test-signup.sh)",
      "Bash(/Users/jean-mariedelaunay/Dashboard Client: Presta/test-signin-twenty.sh)",
      "Bash(/Users/jean-mariedelaunay/Dashboard Client: Presta/test-twenty-full-auth.sh)",
      "Bash(/Users/jean-mariedelaunay/Dashboard Client: Presta/test-simple-auth.sh)",
      "Bash(docker restart:*)",
      "Bash(/Users/jean-mariedelaunay/Dashboard Client: Presta/test-twenty-api.sh)",
      "Bash(TWENTY_API_KEY=\"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiI5MjdkYjBjMy1jNjVhLTRiMGQtYmM0Mi03N2NiNTNjNTRmMGIiLCJ0eXBlIjoiQVBJX0tFWSIsIndvcmtzcGFjZUlkIjoiOTI3ZGIwYzMtYzY1YS00YjBkLWJjNDItNzdjYjUzYzU0ZjBiIiwiaWF0IjoxNzUzOTg1MzQ4LCJleHAiOjQ5MDc1ODUzNDcsImp0aSI6IjhmNmI5YTczLWRlNmMtNDlkMC1iYmI2LWVmMzQ1ZWVmMjMyYiJ9.Mx7IQOHMsC9g_7oCODpQJRoQCHTsvcDcH19gzjNCt2g\" TWENTY_API_URL=\"http://localhost:3000/graphql\" timeout 5 node index.js)",
      "Bash(npm search:*)",
      "Bash(timeout 5 npm start)",
      "Bash(./debug-temp/check-config.sh:*)",
      "Bash(jq:*)",
      "mcp__github__create_repository"
    ],
    "deny": []
  }
}