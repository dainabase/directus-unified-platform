{
  "permissions": {
    "allow": [
      "Bash(grep:*)",
      "Bash(node:*)",
      "Bash(npm run migrate:compliance:*)",
      "Bash(npm run migrate:talents:*)",
      "Bash(jq:*)",
      "Bash(npm run migrate:interactions:*)",
      "Bash(npm run migrate:budgets:*)",
      "Bash(npm run migrate:subscriptions:*)",
      "WebFetch(domain:raw.githubusercontent.com)",
      "WebFetch(domain:github.com)",
      "Bash(npm start)",
      "Bash(git rev-parse:*)",
      "Bash(npm install:*)",
      "Bash(mkdir:*)",
      "Bash(cp:*)",
      "Bash(git add:*)",
      "Bash(git commit:*)",
      "Bash(mkdir:*)",
      "Bash(npm search:*)",
      "Bash(pkill:*)",
      "Bash(chmod:*)",
      "Bash(tree:*)",
      "Bash(echo:*)",
      "Bash(git push:*)",
      "Bash(git pull:*)",
      "Bash(git stash:*)",
      "Bash(git log:*)",
      "Bash(chmod:*)",
      "Bash(./auto-save.sh:*)",
      "Bash(./check-sync.sh:*)",
      "Bash(./auto-save.sh:*)",
      "Bash(sed:*)",
      "Bash(cat:*)",
      "Bash(docker stop:*)",
      "Bash(git submodule:*)",
      "Bash(git tag:*)",
      "Bash(if [ -n \"$(git status --porcelain)\" ])",
      "Bash(then git add STATUS/proof-server-running.txt)",
      "Bash(fi)",
      "Bash(open http://localhost:3000/client/dashboard.html)",
      "Bash(open http://localhost:3000/prestataire/dashboard.html)",
      "Bash(open http://localhost:3000/revendeur/dashboard.html)",
      "Bash(ln:*)",
      "Bash(git checkout:*)",
      "Bash(./reorganize-repo.sh)",
      "Bash(timeout 10 npm run dev)",
      "Bash(git rm:*)",
      "Bash(npm run dev:*)",
      "Bash(docker-compose up:*)",
      "Bash(timeout 10 npx directus start)",
      "Bash(docker-compose:*)",
      "Bash(docker logs:*)",
      "Bash(screencapture:*)",
      "Bash(open http://localhost:8082/setup)",
      "Bash(true)",
      "Bash(docker exec:*)",
      "Bash(open http://localhost:8082)",
      "Bash(touch:*)",
      "Bash(git clone:*)",
      "Bash(docker network:*)",
      "Bash(docker pull:*)",
      "Bash(npx http-server:*)",
      "Bash(open http://localhost:3000/src/frontend/portals/superadmin-v2/index.html)",
      "Bash(python3:*)",
      "Bash(open:*)",
      "Bash(DIRECTUS_URL=\"http://localhost:8055\" DIRECTUS_TOKEN=\"e6Vt5LRHnYhq7-78yzoSxwdgjn2D6-JW\" node node_modules/directus-mcp-server/server.js)",
      "Bash(mv:*)",
      "Bash(git fetch:*)",
      "Bash(ls:*)",
      "Bash(rm:*)",
      "Bash(curl:*)",
      "Bash(wget:*)",
      "Bash(kill:*)",
      "Bash(./dev.sh)",
      "Bash(npm ls:*)",
      "Bash(test:*)",
      "Bash(npm run build:*)",
      "Bash(npx vite:*)",
      "Bash(git reset:*)",
      "Bash(find:*)",
      "Bash(npx directus users passwd:*)",
      "Bash(npx directus-template-cli:*)",
      "Bash(./check-docker-status.sh:*)",
      "Bash(./diagnose-mcp.sh:*)",
      "Bash(./fix-mcp-config.sh:*)",
      "Bash(./verify-mcp-final.sh:*)",
      "Bash(./fix-docker-permissions.sh:*)",
      "Bash(npx @smithery/cli install:*)",
      "Bash(docker:*)",
      "WebFetch(domain:docs.docker.com)",
      "Bash(./scripts/fix-mcp-claude.sh:*)",
      "Bash(./run-fix-mcp.sh:*)",
      "Bash(npm run setup:*)",
      "Bash(npm init:*)",
      "Bash(if [ ! -d \"node_modules\" ])",
      "Bash(then echo \"⚠️ Installation des dépendances nécessaire...\")",
      "Bash(else echo \"✅ Dépendances déjà installées\")",
      "Bash(if [ -f \"docker-compose.invoice-ninja.yml\" ])",
      "Bash(then [ -f \"docker-compose.yml\" ])",
      "Bash(./test-erpnext.sh:*)",
      "Bash(CONTAINER=\"erpnext-simple\")",
      "Bash(./verify-all-mcp-emergency.sh:*)",
      "Bash(./test-all-services.sh:*)",
      "Bash(npm cache clean:*)",
      "Bash(npx @pixelsock/directus-mcp@latest:*)",
      "Bash(DIRECTUS_URL=\"http://localhost:8055\" DIRECTUS_ACCESS_TOKEN=\"e6Vt5LRHnYhq7-78yzoSxwdgjn2D6-JW\" timeout 5 node directus-mcp-server-v2.js)",
      "Bash(./cleanup-design-system.sh:*)",
      "Bash(git merge:*)",
      "Bash(git rebase:*)",
      "Bash(for:*)",
      "Bash(do echo \"=== $file ===\")",
      "Bash(done)",
      "mcp__fast-filesystem__fast_write_file",
      "mcp__desktop-commander__create_directory",
      "mcp__desktop-commander__write_file",
      "Bash(pnpm list:*)",
      "Bash(# Remplacer les patterns readItems\nsed -i '''' ''s/directus\\.request(\\s*readItems(\\x27\\([^''\\'''']*\\)\\x27,/directus.items(\\x27\\1\\x27).readMany(/g'' bank-reconciliation.service.js\n\n# Remplacer les patterns createItem\nsed -i '''' ''s/directus\\.request(\\s*createItem(\\x27\\([^''\\'''']*\\)\\x27,/directus.items(\\x27\\1\\x27).createOne(/g'' bank-reconciliation.service.js\n\n# Remplacer les patterns updateItem\nsed -i '''' ''s/directus\\.request(\\s*updateItem(\\x27\\([^''\\'''']*\\)\\x27,\\s*\\([^,]*\\),/directus.items(\\x27\\1\\x27).updateOne(\\2,/g'' bank-reconciliation.service.js\n\necho \"\"Remplacements effectués\"\")",
      "Bash(# Corriger les await directus.request avec updateItem pattern plus spécifique\nsed -i '''' ''s/await directus\\.request(\\s*updateItem(/await directus.items(/g'' bank-reconciliation.service.js\n\n# Corriger les await directus.request avec createItem \nsed -i '''' ''s/await directus\\.request(\\s*createItem(/await directus.items(/g'' bank-reconciliation.service.js\n\n# Corriger les return directus.request avec readItems\nsed -i '''' ''s/return directus\\.request(\\s*readItems(/return directus.items(/g'' bank-reconciliation.service.js\n\necho \"\"Corrections supplémentaires effectuées\"\")",
      "Bash(# Corriger unified-invoice.service.js\nsed -i '''' ''s/directus\\.request(\\s*createItem(/directus.items(/g'' unified-invoice.service.js\nsed -i '''' ''s/directus\\.request(\\s*readItem(/directus.items(/g'' unified-invoice.service.js  \nsed -i '''' ''s/directus\\.request(\\s*readItems(/directus.items(/g'' unified-invoice.service.js\nsed -i '''' ''s/directus\\.request(\\s*updateItem(/directus.items(/g'' unified-invoice.service.js\n\necho \"\"unified-invoice.service.js corrigé\"\")",
      "Bash(# Script pour remplacer toutes les occurrences des patterns Directus\ncat > fix_directus_patterns.js << ''EOF''\nimport fs from ''fs'';\n\nconst filePath = ''bank-reconciliation.service.js'';\nlet content = fs.readFileSync(filePath, ''utf8'');\n\n// Remplacements pour directus.request patterns\ncontent = content.replace(/await directus\\.request\\(\\s*updateItem\\(''([^'']+)'',\\s*([^,]+),\\s*(\\{[^}]*\\})\\s*\\)\\s*\\);?/g, \n    \"\"await directus.items(''$1'').updateOne($2, $3);\"\");\n\ncontent = content.replace(/await directus\\.request\\(\\s*createItem\\(''([^'']+)'',\\s*(\\{[^}]*\\})\\s*\\)\\s*\\);?/g,\n    \"\"await directus.items(''$1'').createOne($2);\"\");\n\ncontent = content.replace(/directus\\.request\\(readItems\\(''([^'']+)'',\\s*(\\{[^}]*\\})\\)\\)/g,\n    \"\"directus.items(''$1'').readMany($2)\"\");\n\nconsole.log(''Corrections terminées'');\nfs.writeFileSync(filePath, content);\nEOF\n\nnode fix_directus_patterns.js)",
      "Bash(# Corrections finales pour les patterns restants  \nsed -i '''' ''s/await directus\\.request(\\s*updateItem(/await directus.items(/g'' bank-reconciliation.service.js\n\n# Vérifier s''il reste des patterns \ngrep -n \"\"directus\\.request.*readItems\\|directus\\.request.*createItem\\|directus\\.request.*updateItem\"\" bank-reconciliation.service.js || echo \"\"Aucun pattern restant trouvé\"\")",
      "Bash(__NEW_LINE__ echo -e \"\\n=== unified-invoice.service.js ===\")",
      "Bash(# Remplacements plus complexes avec variables\nsed -i '''' ''s/await directus\\.request(\\s*updateItem(collection,/await directus.items(collection).updateOne(/g'' bank-reconciliation.service.js\nsed -i '''' ''s/await directus\\.request(\\s*readItems(collection,/await directus.items(collection).readMany(/g'' bank-reconciliation.service.js\nsed -i '''' ''s/await directus\\.request(\\s*readItems(\\x27bank_transactions\\x27,/await directus.items(\\x27bank_transactions\\x27).readMany(/g'' bank-reconciliation.service.js\n\n# Vérifier le résultat\necho \"\"Vérification finale:\"\"\ngrep -c \"\"directus\\.request.*readItems\\|directus\\.request.*createItem\\|directus\\.request.*updateItem\"\" bank-reconciliation.service.js || echo \"\"✅ Tous les patterns corrigés\"\")",
      "Bash(__NEW_LINE__ echo -n \"unified-invoice.service.js: \")",
      "Bash(do)",
      "Bash(if node -c \"$file\")",
      "Bash(then)",
      "Bash(else)",
      "Bash(./scripts/register_directus_relations.sh:*)",
      "Bash(bash:*)",
      "Bash(yarn install)",
      "Bash(npx directus database:*)",
      "Bash(psql:*)",
      "Bash(SKIP_SIMPLE_GIT_HOOKS=1 git commit -m \"feat: Complete SuperAdmin Dashboard with Light Mode Design\n\n- Implemented Phase 4 finalization (Prompts 4.1-4.6)\n  - Cleaned up obsolete files and consolidated dashboard components\n  - Created SidebarV2 and TopBar with glassmorphism design\n  - Integrated Recharts visualization library\n  - Set up data fetching with React Query and caching\n  \n- Applied design corrections (Light Mode with Blue-600)\n  - Replaced dark mode violet theme with light mode Blue-600\n  - Updated all CSS files for light backgrounds and proper colors\n  - Fixed glassmorphism effects for light mode\n  - Created design-system.css with proper design tokens\n  \n- Added new modules and features\n  - Finance modules (banking, accounting, invoices, collection)\n  - CRM module with contacts and companies\n  - Legal module with CGV management\n  - HR module with team management\n  - Created mock data services and hooks\n  \n- Technical improvements\n  - Fixed all import errors and missing dependencies\n  - Added proper routing structure\n  - Implemented multi-company architecture\n  - Set up LRU cache with TTL for performance\")",
      "Bash(claude doctor)",
      "Bash(node --check:*)",
      "Bash(wc:*)"
    ],
    "deny": []
  }
}
